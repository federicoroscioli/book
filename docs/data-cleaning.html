<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Data Cleaning | Introduction to Data Analysis with R</title>
  <meta name="description" content="3 Data Cleaning | Introduction to Data Analysis with R" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Data Cleaning | Introduction to Data Analysis with R" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Data Cleaning | Introduction to Data Analysis with R" />
  
  
  

<meta name="author" content="Federico Roscioli" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="a-b-c.html"/>
<link rel="next" href="advanced-data-manipulation-and-plotting.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#author"><i class="fa fa-check"></i>Author</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="part"><span><b>I The R code</b></span></li>
<li class="chapter" data-level="1" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>1</b> Installation</a>
<ul>
<li class="chapter" data-level="1.1" data-path="installation.html"><a href="installation.html#introductory-activities"><i class="fa fa-check"></i><b>1.1</b> Introductory activities</a></li>
<li class="chapter" data-level="1.2" data-path="installation.html"><a href="installation.html#visualization-suggestions"><i class="fa fa-check"></i><b>1.2</b> Visualization suggestions</a></li>
<li class="chapter" data-level="1.3" data-path="installation.html"><a href="installation.html#the-workspace"><i class="fa fa-check"></i><b>1.3</b> The workspace</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="a-b-c.html"><a href="a-b-c.html"><i class="fa fa-check"></i><b>2</b> A, B, C</a>
<ul>
<li class="chapter" data-level="2.1" data-path="a-b-c.html"><a href="a-b-c.html#the-first-code"><i class="fa fa-check"></i><b>2.1</b> The first code</a></li>
<li class="chapter" data-level="2.2" data-path="a-b-c.html"><a href="a-b-c.html#indexing"><i class="fa fa-check"></i><b>2.2</b> Indexing</a></li>
<li class="chapter" data-level="2.3" data-path="a-b-c.html"><a href="a-b-c.html#the-first-function"><i class="fa fa-check"></i><b>2.3</b> The first function</a></li>
<li class="chapter" data-level="2.4" data-path="a-b-c.html"><a href="a-b-c.html#dataset-exploration"><i class="fa fa-check"></i><b>2.4</b> Dataset Exploration</a></li>
<li class="chapter" data-level="2.5" data-path="a-b-c.html"><a href="a-b-c.html#subsetting"><i class="fa fa-check"></i><b>2.5</b> Subsetting</a></li>
<li class="chapter" data-level="2.6" data-path="a-b-c.html"><a href="a-b-c.html#importing-and-exporting-data"><i class="fa fa-check"></i><b>2.6</b> Importing and exporting data</a></li>
<li class="chapter" data-level="2.7" data-path="a-b-c.html"><a href="a-b-c.html#exercises"><i class="fa fa-check"></i><b>2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>3</b> Data Cleaning</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-cleaning.html"><a href="data-cleaning.html#variable-names"><i class="fa fa-check"></i><b>3.1</b> Variable Names</a></li>
<li class="chapter" data-level="3.2" data-path="data-cleaning.html"><a href="data-cleaning.html#variable-types"><i class="fa fa-check"></i><b>3.2</b> Variable Types</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-cleaning.html"><a href="data-cleaning.html#factor-variables"><i class="fa fa-check"></i><b>3.2.1</b> Factor variables</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-cleaning.html"><a href="data-cleaning.html#dates-and-times"><i class="fa fa-check"></i><b>3.2.2</b> Dates and times</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-cleaning.html"><a href="data-cleaning.html#row-names"><i class="fa fa-check"></i><b>3.3</b> Row Names</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="advanced-data-manipulation-and-plotting.html"><a href="advanced-data-manipulation-and-plotting.html"><i class="fa fa-check"></i><b>4</b> Advanced Data Manipulation and Plotting</a>
<ul>
<li class="chapter" data-level="4.1" data-path="advanced-data-manipulation-and-plotting.html"><a href="advanced-data-manipulation-and-plotting.html#ifelse"><i class="fa fa-check"></i><b>4.1</b> Ifelse</a></li>
<li class="chapter" data-level="4.2" data-path="advanced-data-manipulation-and-plotting.html"><a href="advanced-data-manipulation-and-plotting.html#the-apply-family"><i class="fa fa-check"></i><b>4.2</b> The Apply family</a></li>
<li class="chapter" data-level="4.3" data-path="advanced-data-manipulation-and-plotting.html"><a href="advanced-data-manipulation-and-plotting.html#dplyr"><i class="fa fa-check"></i><b>4.3</b> Dplyr</a></li>
<li class="chapter" data-level="4.4" data-path="advanced-data-manipulation-and-plotting.html"><a href="advanced-data-manipulation-and-plotting.html#merging-datasets"><i class="fa fa-check"></i><b>4.4</b> Merging datasets</a></li>
<li class="chapter" data-level="4.5" data-path="advanced-data-manipulation-and-plotting.html"><a href="advanced-data-manipulation-and-plotting.html#melting-vs-transposing"><i class="fa fa-check"></i><b>4.5</b> Melting vs Transposing</a></li>
<li class="chapter" data-level="4.6" data-path="advanced-data-manipulation-and-plotting.html"><a href="advanced-data-manipulation-and-plotting.html#ggplot2"><i class="fa fa-check"></i><b>4.6</b> Ggplot2</a></li>
<li class="chapter" data-level="4.7" data-path="advanced-data-manipulation-and-plotting.html"><a href="advanced-data-manipulation-and-plotting.html#exercises-1"><i class="fa fa-check"></i><b>4.7</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Statistical Analysis</b></span></li>
<li class="chapter" data-level="5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>5</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#central-tendency-measures"><i class="fa fa-check"></i><b>5.1</b> Central Tendency Measures</a></li>
<li class="chapter" data-level="5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#variability-measures"><i class="fa fa-check"></i><b>5.2</b> Variability Measures</a></li>
<li class="chapter" data-level="5.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#inequality-measures"><i class="fa fa-check"></i><b>5.3</b> Inequality Measures</a></li>
<li class="chapter" data-level="5.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#data-visualization"><i class="fa fa-check"></i><b>5.4</b> Data visualization</a></li>
<li class="chapter" data-level="5.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#scaling-data"><i class="fa fa-check"></i><b>5.5</b> Scaling data</a></li>
<li class="chapter" data-level="5.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#probability-sampling"><i class="fa fa-check"></i><b>5.6</b> Probability Sampling</a></li>
<li class="chapter" data-level="5.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercises-2"><i class="fa fa-check"></i><b>5.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i><b>6</b> Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="6.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#probability-distributions"><i class="fa fa-check"></i><b>6.1</b> Probability Distributions</a></li>
<li class="chapter" data-level="6.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#shapiro-wilk-test"><i class="fa fa-check"></i><b>6.2</b> Shapiro-Wilk Test</a></li>
<li class="chapter" data-level="6.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#one-sample-t-test"><i class="fa fa-check"></i><b>6.3</b> One-Sample T-Test</a></li>
<li class="chapter" data-level="6.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#unpaired-two-sample-t-test"><i class="fa fa-check"></i><b>6.4</b> Unpaired Two Sample T-Test</a></li>
<li class="chapter" data-level="6.5" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#mann-whitney-u-test"><i class="fa fa-check"></i><b>6.5</b> Mann Whitney U Test</a></li>
<li class="chapter" data-level="6.6" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#paired-sample-t-test"><i class="fa fa-check"></i><b>6.6</b> Paired Sample T-Test</a></li>
<li class="chapter" data-level="6.7" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#exercises-3"><i class="fa fa-check"></i><b>6.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="bivariate-analysis.html"><a href="bivariate-analysis.html"><i class="fa fa-check"></i><b>7</b> Bivariate Analysis</a>
<ul>
<li class="chapter" data-level="7.1" data-path="bivariate-analysis.html"><a href="bivariate-analysis.html#correlation"><i class="fa fa-check"></i><b>7.1</b> Correlation</a></li>
<li class="chapter" data-level="7.2" data-path="bivariate-analysis.html"><a href="bivariate-analysis.html#linear-regression"><i class="fa fa-check"></i><b>7.2</b> Linear Regression</a></li>
<li class="chapter" data-level="7.3" data-path="bivariate-analysis.html"><a href="bivariate-analysis.html#logistic-regressions"><i class="fa fa-check"></i><b>7.3</b> Logistic Regressions</a></li>
<li class="chapter" data-level="7.4" data-path="bivariate-analysis.html"><a href="bivariate-analysis.html#exercises-4"><i class="fa fa-check"></i><b>7.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html"><i class="fa fa-check"></i><b>8</b> Multivariate Analysis</a>
<ul>
<li class="chapter" data-level="8.1" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#cluster-analysis"><i class="fa fa-check"></i><b>8.1</b> Cluster Analysis</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#hierarchical-clustering"><i class="fa fa-check"></i><b>8.1.1</b> Hierarchical Clustering</a></li>
<li class="chapter" data-level="8.1.2" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#k-means-clustering"><i class="fa fa-check"></i><b>8.1.2</b> K-Means clustering</a></li>
<li class="chapter" data-level="8.1.3" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#the-silhouette-plot"><i class="fa fa-check"></i><b>8.1.3</b> The silhouette plot</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#heatmap"><i class="fa fa-check"></i><b>8.2</b> Heatmap</a></li>
<li class="chapter" data-level="8.3" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#principal-component-analysis"><i class="fa fa-check"></i><b>8.3</b> Principal Component Analysis</a></li>
<li class="chapter" data-level="8.4" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#classification-and-regression-trees"><i class="fa fa-check"></i><b>8.4</b> Classification And Regression Trees</a></li>
<li class="chapter" data-level="8.5" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#composite-indicators"><i class="fa fa-check"></i><b>8.5</b> Composite Indicators</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#mazziotta-pareto-index"><i class="fa fa-check"></i><b>8.5.1</b> Mazziotta-Pareto Index</a></li>
<li class="chapter" data-level="8.5.2" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#adjusted-mazziotta-pareto-index"><i class="fa fa-check"></i><b>8.5.2</b> Adjusted Mazziotta-Pareto Index</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#exercises-5"><i class="fa fa-check"></i><b>8.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="final-remarks.html"><a href="final-remarks.html"><i class="fa fa-check"></i>Final Remarks</a></li>
<li class="chapter" data-level="" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i>Bibliography</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Data Analysis with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-cleaning" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Data Cleaning<a href="data-cleaning.html#data-cleaning" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<blockquote>
<p><em>Happy families are all alike; every unhappy family is unhappy in its
own way.</em><br />
Lev Tolstoy</p>
</blockquote>
<p>It is often said that 80% of data analysis is spent on the process of
cleaning and preparing the data. Data cleaning is not just one step, but
must be repeated many times over the course of analysis as new problems
arise or new data is collected. The tidy data standard has been designed
to facilitate initial exploration and analysis of the data, and to
simplify the development of data analysis tools that work well together.</p>
<p>A dataset is a collection of values, usually either numbers (if
quantitative) or strings (if qualitative). Most statistical datasets are
rectangular tables made up of rows and columns. The columns are almost
always labeled and the rows are sometimes labeled. Values are organized
in two ways. Every value belongs to a variable (<strong>column</strong>) and an
observation (<strong>row</strong>). A variable contains all values that measure the
same underlying attribute (like height, temperature, duration) across
units. An observation contains all values measured on the same unit
(like a person, or a day, or a race) across attributes.</p>
<p>In tidy data <span class="citation">(<a href="#ref-wickham2014">Wickham 2014</a>)</span>:</p>
<p>1. Each variable forms a column.</p>
<p>2. Each observation forms a row.</p>
<p>3. Each type of observational unit forms a table.</p>
<p>Tidy data makes it easy for an analyst or a computer to extract needed
variables because it provides a standard way of structuring a dataset.
They are also particularly well suited for vectorized programming
languages like R, because the layout ensures that values of different
variables from the same observation are always paired. While the order
of variables and observations does not affect analysis, a good ordering
makes it easier to scan the raw values.</p>
<p>The five most common problems with messy datasets are:</p>
<ul>
<li><p>Column names are values or codes and not variable names.</p></li>
<li><p>Multiple variables are stored in one column.</p></li>
<li><p>Variables are stored in both rows and columns.</p></li>
<li><p>Multiple types of observational units are stored in the same table
(i.e. people and household).</p></li>
<li><p>A single observational unit is stored in multiple tables.</p></li>
<li><p>Variables types are miss-specified due to inputational errors (comma
before decimals, or written comments within numeric columns).</p></li>
</ul>
<p> </p>
<p> </p>
<p> </p>
<div id="variable-names" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Variable Names<a href="data-cleaning.html#variable-names" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Working with external code or data, I often see variable names or object
names such as <span class="math inline">\(X, y, xs, x1, x2, tp, tn, clf, reg, xi, yi, ii\)</span>. This
creates a problem when we need to analyze a specific variable, or
understand the results we get. In fact, we will have to go back to the
code-book to understand the content of each variable. To put it frankly,
people (myself included) are terrible at naming objects, especially when
we need to invent a lot of names, but a bigger effort is needed
<span class="citation">(<a href="#ref-koehrsen2019">Koehrsen 2019</a>)</span>.</p>
<p>There are three fundamental ideas to keep in mind when naming variables:</p>
<ol style="list-style-type: decimal">
<li><p><strong>The variable name must describe the information represented by the
variable. A variable name should tell us specifically in words what
the variable stands for.</strong></p></li>
<li><p><strong>Our code will be read by others or us in the future. So we should
prioritize how easy it is understood, rather than how quickly it is
written.</strong></p></li>
<li><p><strong>Adopt standard conventions for naming so we can make one global
decision instead of multiple local decisions throughout the
process.</strong></p></li>
</ol>
<p>In order to change the names of the variables we can use the following
code. Basically the function <code>colnames()</code> retrieves the names of the
variables as a character vector and we can change it as we have seen in
<a href="a-b-c.html#indexing">Indexing</a>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-cleaning.html#cb13-1" tabindex="-1"></a><span class="co"># retreiving variable names</span></span>
<span id="cb13-2"><a href="data-cleaning.html#cb13-2" tabindex="-1"></a><span class="fu">colnames</span>(mtcars)</span>
<span id="cb13-3"><a href="data-cleaning.html#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="data-cleaning.html#cb13-4" tabindex="-1"></a><span class="co"># changing the name of the variable mpg to consumption</span></span>
<span id="cb13-5"><a href="data-cleaning.html#cb13-5" tabindex="-1"></a><span class="fu">colnames</span>(mtcars)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;consumption&quot;</span></span></code></pre></div>
<p> </p>
<p> </p>
<p> </p>
</div>
<div id="variable-types" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Variable Types<a href="data-cleaning.html#variable-types" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Variable types are important because they tell R how to interpret a
variable. As an example, we never want R to treat a numeric variable as
a character one because we would not be able to use that variable for
calculations.</p>
<p>Fortunately, when we import a dataset R-Studio automatically recognizes
the type of each variable. However, sometimes there are some inputation
mistakes that the software cannot overcome by itself. I refer to cases
such as a number with a comma instead of a dot before decimals, or a
cell with some comments in a numeric variable, etc. In all these cases R
will read the variable as a character variable. The function <code>str()</code>,
allows us to recognize the possible problem by listing all the variables
and their types. If we see a missclassified variable we can immediately
explore it via <code>summary()</code> and/or <code>table()</code>, find the error, and correct
it. Finally we will need to tell R which is the right type for that
variable, if we don’t get any error, it means that we fixed it (look at
the example below).</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-cleaning.html#cb14-1" tabindex="-1"></a><span class="co"># creating an age vector</span></span>
<span id="cb14-2"><a href="data-cleaning.html#cb14-2" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">22</span>, <span class="dv">12</span>, <span class="st">&quot;didn&#39;t answer&quot;</span>, <span class="dv">30</span>)</span>
<span id="cb14-3"><a href="data-cleaning.html#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="data-cleaning.html#cb14-4" tabindex="-1"></a><span class="co"># we need it numeric, but it is character (chr)</span></span>
<span id="cb14-5"><a href="data-cleaning.html#cb14-5" tabindex="-1"></a><span class="fu">str</span>(age)</span>
<span id="cb14-6"><a href="data-cleaning.html#cb14-6" tabindex="-1"></a></span>
<span id="cb14-7"><a href="data-cleaning.html#cb14-7" tabindex="-1"></a><span class="co"># we find the problem: there is a comment!</span></span>
<span id="cb14-8"><a href="data-cleaning.html#cb14-8" tabindex="-1"></a><span class="fu">table</span>(age)</span>
<span id="cb14-9"><a href="data-cleaning.html#cb14-9" tabindex="-1"></a></span>
<span id="cb14-10"><a href="data-cleaning.html#cb14-10" tabindex="-1"></a><span class="co"># we change the value where there was the comment and input a missing value</span></span>
<span id="cb14-11"><a href="data-cleaning.html#cb14-11" tabindex="-1"></a>age[age<span class="sc">==</span><span class="st">&quot;didn&#39;t answer&quot;</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb14-12"><a href="data-cleaning.html#cb14-12" tabindex="-1"></a></span>
<span id="cb14-13"><a href="data-cleaning.html#cb14-13" tabindex="-1"></a><span class="co"># we change the vector type to numeric</span></span>
<span id="cb14-14"><a href="data-cleaning.html#cb14-14" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(age)</span></code></pre></div>
<p>Remember that all data types in R have an apposite function that
converts the data to its type. To list the most used: <code>as.character()</code>,
<code>as.numeric()</code>, <code>as.factor()</code>, <code>as.data.frame()</code>, etc…</p>
<p> </p>
<div id="factor-variables" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Factor variables<a href="data-cleaning.html#factor-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In some cases (especially when plotting data), it is important that
factor variables are recognized by R and treated accordingly. Factor
variables are dichotomous (female and male, or 1 and 0, or yes and no)
or categorical (hair color, rooftop type, vehicle type, etc…).</p>
<p>A dummy variable is a variable that indicates whether an observation has
a particular characteristic. A dummy variable can only assume the values
0 and 1, where 0 indicates the absence of the property, and 1 indicates
the presence of the same. The values 0/1 can be seen as no/yes or
off/on.</p>
<p>The following code creates a character variable composed by ten random
“yes” and “no”. It, then, turns the variable into a factor variable and
specifies the levels. By comparing the summary of the variables, we see
immediately how differently R behaves when it is dealing with a factor
as compared to a character variable. The <code>relevel()</code> function reorders
the variable as we want.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-cleaning.html#cb15-1" tabindex="-1"></a>yesno <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;yes&quot;</span>,<span class="st">&quot;no&quot;</span>), <span class="at">size=</span><span class="dv">10</span>, <span class="at">replace=</span><span class="cn">TRUE</span>)</span>
<span id="cb15-2"><a href="data-cleaning.html#cb15-2" tabindex="-1"></a><span class="fu">str</span>(yesno)</span>
<span id="cb15-3"><a href="data-cleaning.html#cb15-3" tabindex="-1"></a><span class="fu">summary</span>(yesno)</span>
<span id="cb15-4"><a href="data-cleaning.html#cb15-4" tabindex="-1"></a></span>
<span id="cb15-5"><a href="data-cleaning.html#cb15-5" tabindex="-1"></a><span class="co"># transform the variable in factor</span></span>
<span id="cb15-6"><a href="data-cleaning.html#cb15-6" tabindex="-1"></a>yesnofac <span class="ot">=</span> <span class="fu">factor</span>(yesno, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;yes&quot;</span>,<span class="st">&quot;no&quot;</span>))</span>
<span id="cb15-7"><a href="data-cleaning.html#cb15-7" tabindex="-1"></a><span class="fu">str</span>(yesnofac)</span>
<span id="cb15-8"><a href="data-cleaning.html#cb15-8" tabindex="-1"></a><span class="fu">summary</span>(yesnofac)</span>
<span id="cb15-9"><a href="data-cleaning.html#cb15-9" tabindex="-1"></a><span class="fu">levels</span>(yesnofac)</span>
<span id="cb15-10"><a href="data-cleaning.html#cb15-10" tabindex="-1"></a></span>
<span id="cb15-11"><a href="data-cleaning.html#cb15-11" tabindex="-1"></a><span class="co"># relevel the variable</span></span>
<span id="cb15-12"><a href="data-cleaning.html#cb15-12" tabindex="-1"></a><span class="fu">relevel</span>(yesnofac, <span class="at">ref=</span><span class="st">&quot;no&quot;</span>)</span>
<span id="cb15-13"><a href="data-cleaning.html#cb15-13" tabindex="-1"></a><span class="fu">as.numeric</span>(yesnofac)</span></code></pre></div>
<p> </p>
</div>
<div id="dates-and-times" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Dates and times<a href="data-cleaning.html#dates-and-times" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>With R we can do calculations using dates and times too. This may sound
wired, but sometimes we need to subtract 180 days to a date variable and
without this functionality this would be quite a complex task. Dates,
however, are not automatically recognized by the software and there is
the need for an external package called <code>lubridate()</code><span class="citation">(<a href="#ref-yarberry2021">Yarberry 2021</a>)</span>.</p>
<p>Following a small example. The functions <code>today()</code> and <code>now()</code> retrieve
the current date in two different levels of detail. The function ymd()
transforms a numeric or character variables containing year, month, and
day into a date variable. Note that the <code>lubridate()</code> package has a long
list of functions according to the format of the date needed (check the
<a href="https://rawgit.com/rstudio/cheatsheets/main/lubridate.pdf">Lubridate cheatsheet</a>).</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-cleaning.html#cb16-1" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb16-2"><a href="data-cleaning.html#cb16-2" tabindex="-1"></a><span class="co"># today&#39;s date</span></span>
<span id="cb16-3"><a href="data-cleaning.html#cb16-3" tabindex="-1"></a><span class="fu">today</span>()</span>
<span id="cb16-4"><a href="data-cleaning.html#cb16-4" tabindex="-1"></a><span class="fu">now</span>()</span>
<span id="cb16-5"><a href="data-cleaning.html#cb16-5" tabindex="-1"></a></span>
<span id="cb16-6"><a href="data-cleaning.html#cb16-6" tabindex="-1"></a><span class="co"># creating a numeric vector of dates with year, month and day</span></span>
<span id="cb16-7"><a href="data-cleaning.html#cb16-7" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20220321</span>, <span class="dv">20220322</span>, <span class="dv">20220320</span>)</span>
<span id="cb16-8"><a href="data-cleaning.html#cb16-8" tabindex="-1"></a><span class="fu">str</span>(x)</span>
<span id="cb16-9"><a href="data-cleaning.html#cb16-9" tabindex="-1"></a></span>
<span id="cb16-10"><a href="data-cleaning.html#cb16-10" tabindex="-1"></a><span class="co"># transforming it in a date type vector </span></span>
<span id="cb16-11"><a href="data-cleaning.html#cb16-11" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">ymd</span>(x)</span>
<span id="cb16-12"><a href="data-cleaning.html#cb16-12" tabindex="-1"></a><span class="fu">str</span>(y)</span>
<span id="cb16-13"><a href="data-cleaning.html#cb16-13" tabindex="-1"></a></span>
<span id="cb16-14"><a href="data-cleaning.html#cb16-14" tabindex="-1"></a><span class="co"># subtracting 180 days to y and x</span></span>
<span id="cb16-15"><a href="data-cleaning.html#cb16-15" tabindex="-1"></a>x<span class="dv">-180</span></span>
<span id="cb16-16"><a href="data-cleaning.html#cb16-16" tabindex="-1"></a>y<span class="dv">-180</span></span></code></pre></div>
<p> </p>
<p> </p>
<p> </p>
</div>
</div>
<div id="row-names" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Row Names<a href="data-cleaning.html#row-names" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Row names are often not important. In most of the cases we will have a
dataset with a column representing the id of the observation. However,
when it comes to some <a href="multivariate-analysis.html#multivariate-analysis">Multivariate Analysis</a> methods, we will need to
have the id of the observation not in one column, but as row name. In
this way R will be able to plot the data automatically referring to the
name of the row.</p>
<p>The code below gives us a way to copy the first column of a dataset to
the row names and then delete the column itself, in order to have a
fully numeric dataset. We will use the same dataset we created in
<a href="a-b-c.html#dataset-exploration">Dataset Exploration</a>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-cleaning.html#cb17-1" tabindex="-1"></a><span class="co"># creatng the dataset</span></span>
<span id="cb17-2"><a href="data-cleaning.html#cb17-2" tabindex="-1"></a>people <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Mary&quot;</span>, <span class="st">&quot;Mike&quot;</span>, <span class="st">&quot;Greg&quot;</span>),</span>
<span id="cb17-3"><a href="data-cleaning.html#cb17-3" tabindex="-1"></a>                     <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">44</span>, <span class="dv">52</span>, <span class="dv">46</span>),</span>
<span id="cb17-4"><a href="data-cleaning.html#cb17-4" tabindex="-1"></a>                     <span class="at">IQ =</span> <span class="fu">c</span>(<span class="dv">160</span>, <span class="dv">95</span>, <span class="dv">110</span>))</span>
<span id="cb17-5"><a href="data-cleaning.html#cb17-5" tabindex="-1"></a></span>
<span id="cb17-6"><a href="data-cleaning.html#cb17-6" tabindex="-1"></a><span class="co"># inputting rownames from the column &quot;name&quot;</span></span>
<span id="cb17-7"><a href="data-cleaning.html#cb17-7" tabindex="-1"></a><span class="fu">rownames</span>(people) <span class="ot">&lt;-</span> people<span class="sc">$</span>name</span>
<span id="cb17-8"><a href="data-cleaning.html#cb17-8" tabindex="-1"></a></span>
<span id="cb17-9"><a href="data-cleaning.html#cb17-9" tabindex="-1"></a><span class="co"># deleting the clumn &quot;name&quot;</span></span>
<span id="cb17-10"><a href="data-cleaning.html#cb17-10" tabindex="-1"></a>people <span class="ot">&lt;-</span> people[,<span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<div style="page-break-after: always;"></div>

</div>
</div>
<h3>Bibliography<a href="bibliography.html#bibliography" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-koehrsen2019" class="csl-entry">
Koehrsen, Will. 2019. <span>“Data Scientists: Your Variable Names Are Awful. Here’s How to Fix Them.”</span> <a href="https://towardsdatascience.com/data-scientists-your-variable-names-are-awful-heres-how-to-fix-them-89053d2855be">https://towardsdatascience.com/data-scientists-your-variable-names-are-awful-heres-how-to-fix-them-89053d2855be</a>.
</div>
<div id="ref-wickham2014" class="csl-entry">
Wickham, Hadley. 2014. <span>“Tidy Data.”</span> <em>Journal of Statistical Software</em> 59 (10). <a href="https://doi.org/10.18637/jss.v059.i10">https://doi.org/10.18637/jss.v059.i10</a>.
</div>
<div id="ref-yarberry2021" class="csl-entry">
Yarberry, William. 2021. <span>“Lubridate: Date and Time Processing.”</span> In <em><span>CRAN</span> Recipes</em>, 109–60. Apress. <a href="https://doi.org/10.1007/978-1-4842-6876-6_3">https://doi.org/10.1007/978-1-4842-6876-6_3</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="a-b-c.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="advanced-data-manipulation-and-plotting.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"toc_depth": 1,
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
